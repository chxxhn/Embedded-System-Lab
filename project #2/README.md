# Project #2 - 폴링 방식을 이용한 릴레이 모듈 제어 
이 프로젝트는 폴링 방식을 통해 릴레이 모듈을 제어하는 방법을 실습하는 것을 목표로 합니다. 메모리 설정, GPIO 기능 이해, 릴레이 모듈이 특정 버튼 입력에 반응하도록 프로그래밍하는 내용을 포함합니다.

---

## 목차
- [목적](#목적)
- [실험 장비](#실험-장비)
- [프로젝트 설정](#프로젝트-설정)
  - [1. 개발 환경 구성](#1-개발-환경-구성)
  - [2. GPIO 및 레지스터 설정](#2-gpio-및-레지스터-설정)
  - [3. 코드 작성](#3-코드-작성)
- [실험 과정](#실험-과정)
- [실험 결과](#실험-결과)

---

## 목적
- 스캐터 파일과 플래시 프로그래밍의 이해.
- 임베디드 펌웨어를 통한 릴레이 모듈 제어.
- 센싱 및 작동에서 폴링 방식의 이해.

## 실험 장비
- **마이크로컨트롤러**: STM32F107VCT6
- **개발 환경**: IAR Embedded Workbench (EW)
- **사용 핀**: PC8, PC9 (릴레이 모듈 제어용)

## 프로젝트 설정
### 1. 개발 환경 구성
project #1와 동일한 방식으로 프로젝트를 생성하고 파일 구조를 설정합니다.

### 2. GPIO 및 레지스터 설정
- **ROM 주소**: 0x0800 0000 ~ 0x0808 0000
- **RAM 주소**: 0x2000 0000 ~ 0x2000 8000
- `myicf.icf` 파일을 이용하여 ROM과 RAM 주소를 설정합니다. 개발 환경에서 `Options -> Linker -> Config` 경로를 통해 설정 파일을 업로드합니다.
- **GPIO 설정**: RCC 주소와 사용할 GPIO 포트 핀 번호를 정의합니다.

### 3. 코드 작성
각 버튼(KEY1, KEY2, KEY3)은 다음과 같은 방식으로 릴레이를 제어합니다.
```c
// main.c의 주요 코드 예시
if (KEY1 눌림) {
    PC8, PC9 설정 -> 일정 시간 후 reset;
}
else if (KEY2 눌림) {
    PC8 설정, PC9 reset -> 시간 후 둘 다 reset;
}
else if (KEY3 눌림) {
    PC8 reset, PC9 설정 -> 일정 시간 후 둘 다 reset;
}
```

## 실험 과정
1. **프로젝트 생성**: 3주차와 동일한 방식으로 프로젝트를 생성하고 파일 구조를 설정합니다.
2. **메모리 구성**: `myicf.icf` 파일을 통해 ROM과 RAM 주소를 설정합니다.
   - ROM 주소: 0x0800 0000 ~ 0x0808 0000
   - RAM 주소: 0x2000 0000 ~ 0x2000 8000
3. **GPIO 설정 및 초기화**: GPIO 포트를 초기화하고 필요한 레지스터 값을 설정합니다.
   - **RCC_APB2ENR**: APB2 버스에 연결된 장치들의 클럭을 활성화합니다.
   - **GPIOx_CRL/CRH**: GPIO 포트의 핀 모드를 설정합니다.
   - **GPIOx_IDR**: 포트의 입력 상태를 읽습니다.
   - **GPIOx_BSRR**: 포트의 특정 핀을 설정(set) 또는 리셋(reset)하는 데 사용됩니다.
4. **릴레이 모듈 제어 코드 작성**: 각 버튼(KEY1, KEY2, KEY3)에 따른 릴레이 모듈 제어 코드를 작성합니다.
5. **회로 연결**: PC8과 PC9 핀에 릴레이 모듈을 연결합니다. 각 모터의 한쪽은 GND에 연결하여 회로가 정상적으로 작동하도록 합니다.

## 실험 결과
- **KEY1** 버튼을 눌렀을 때: 1번 및 2번 모터가 1초 동안 회전 후 정지
- **KEY2** 버튼을 눌렀을 때: 1번 모터가 1초 동안 회전 후 정지
- **KEY3** 버튼을 눌렀을 때: 2번 모터가 1초 동안 회전 후 정지
  
